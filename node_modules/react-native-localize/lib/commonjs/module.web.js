var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.constants=exports.handlers=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _constants=require("./constants");function getLocaleFromLanguageTag(languageTag,countryCodeFallback){var splitted=languageTag.split("-");var languageCode=splitted[0];if(splitted[1]==="419"){splitted[1]="UN";}var countryCode=splitted[1]||countryCodeFallback;return{languageCode:languageCode,countryCode:countryCode,languageTag:languageCode+"-"+countryCode,isRTL:_constants.USES_RTL_LAYOUT.includes(languageCode)};}function generateConstants(languageTags){var base=getLocaleFromLanguageTag(languageTags[0],"US");var currencies=[];var locales=[];var numberFormatter=new Intl.NumberFormat(base.languageTag);var dateFormatter=new Intl.DateTimeFormat(base.languageTag,{hour:"numeric"});languageTags.forEach(function(languageTag){var locale=getLocaleFromLanguageTag(languageTag,base.countryCode);var currency=_constants.CURRENCIES[locale.countryCode]||"USD";if(!locales.find(function(_){return _.languageTag===locale.languageTag;})){locales.push(locale);}if(!currencies.includes(currency)){currencies.push(currency);}});var numberSeparators=(0,_toConsumableArray2.default)(numberFormatter.format(1000000.1).replace(/\d/g,""));var numberFormatSettings={decimalSeparator:numberSeparators[numberSeparators.length-1],groupingSeparator:numberSeparators[0]};var eveningDate=new Date(2000,0,1,20);var uses24HourClock=!!dateFormatter.format(eveningDate).match(/am|pm/i);return{calendar:"gregorian",country:base.countryCode,currencies:currencies,locales:locales,numberFormatSettings:numberFormatSettings,temperatureUnit:_constants.USES_FAHRENHEIT.includes(base.countryCode)?"fahrenheit":"celsius",timeZone:dateFormatter.resolvedOptions().timeZone||"Etc/UTC",uses24HourClock:uses24HourClock,usesMetricSystem:!_constants.USES_IMPERIAL.includes(base.countryCode)};}var handlers=new Set();exports.handlers=handlers;var constants=generateConstants(navigator.languages);exports.constants=constants;window.addEventListener("languagechange",function(){exports.constants=constants=generateConstants(navigator.languages);handlers.forEach(function(handler){return handler();});});
//# sourceMappingURL=module.web.js.map